# HURRICANE v6-gatewayd Configuration Example
# Mullvad VPN Integration

[core]
log_level = "info"
state_dir = "/var/lib/v6-gatewayd"

[api]
bind = "127.0.0.1"
port = 8642

# Crypto settings (optional - for API authentication)
[crypto]
enabled = false
keyfile = "/var/lib/v6-gatewayd/keys.bin"

# Exposure mode
[exposure]
mode = "kernel"  # Apps bind directly to VPN interface

# Primary Mullvad tunnel (US East Coast)
[tunnel1]
name = "mullvad-us-nyc"
type = "wireguard"
iface = "mullvad0"
# IPv6 is optional - omit v6_prefix if not using IPv6
v6_prefix = "fc00:bbbb:bbbb:bb01::1"
enabled = true
priority = 0  # Highest priority (primary tunnel)

# Backup Mullvad tunnel (US West Coast)
# Uncomment to enable automatic failover
# [tunnel2]
# name = "mullvad-us-lax"
# type = "wireguard"
# iface = "mullvad1"
# v6_prefix = "fc00:bbbb:bbbb:bb02::1"
# enabled = true
# priority = 1  # Lower priority (backup)

# Backup Mullvad tunnel (Europe)
# [tunnel3]
# name = "mullvad-eu-ams"
# type = "wireguard"
# iface = "mullvad2"
# v6_prefix = "fc00:bbbb:bbbb:bb03::1"
# enabled = true
# priority = 2  # Lowest priority (second backup)

# Setup Instructions:
# 1. Get Mullvad account at https://mullvad.net
# 2. Generate WireGuard config at https://mullvad.net/en/account/#/wireguard-config
# 3. Download config and save to /etc/wireguard/mullvad0.conf
# 4. Copy this file to /etc/v6-gatewayd.conf
# 5. Edit v6_prefix to match your Mullvad IPv6 address (if using IPv6)
# 6. Start: sudo systemctl start v6-gatewayd
# 7. Verify: curl http://localhost:8642/health

# Notes:
# - WireGuard config goes in /etc/wireguard/mullvadX.conf (X = 0, 1, 2, etc.)
# - Interface name must match WireGuard config filename
# - v6_prefix is the IPv6 address from Mullvad config [Interface] Address
# - System works fine without IPv6 (just omit v6_prefix)
# - Failover happens automatically if primary tunnel fails
# - Health checks run every 30 seconds
